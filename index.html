<!DOCTYPE html>
<html>
<head>
    <title>Etch-A-Sketch</title>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <h1 class="text game-title">Etch-A-Sketch</h1>
        <p class="text game-instructions">Mouse over the grid squares to color them!</p>
        <button class="btn" id="reset-game">Reset Game</button>
        <div class="grid-container"></div>
    </div>
    <script>
        const resetButton = document.querySelector('#reset-game');
        const gridContainer = document.querySelector('.grid-container');

        
        resetButton.addEventListener('click', buildGrid);

        function buildGrid() {
            let gridSize = prompt("What size grid you want?");
            resetGrid();
            gridContainer.setAttribute('style', `grid-template-rows: repeat(${gridSize}, 1fr);
        grid-template-columns: repeat(${gridSize}, 1fr);`);

            for (let i = 0; i < gridSize; i++){
                for (let j = 0; j < gridSize; j++){
                    let gridBlock = document.createElement('div');
                    gridBlock.classList.add('grid-block');
                    gridBlock.style.backgroundColor = "rgb(255, 255, 255)";
                    gridBlock.addEventListener('mouseenter', colorBlock);
                    gridContainer.appendChild(gridBlock);
                }
            }
        }
        function colorBlock(e) {
            let targetBackgroundColor = e.target.style.backgroundColor;
            let rgbValue = targetBackgroundColor.match(/\((\d+),/)[1];
            let changedRGB = rgbValue > 255/5 ? rgbValue - 255/5 : 0; 
            e.target.style.backgroundColor = `rgb(${changedRGB}, ${changedRGB}, ${changedRGB})`;
            
        }
        function resetGrid() {
            while (gridContainer.firstChild) { gridContainer.removeChild(gridContainer.lastChild);}
            /* let blockList = document.querySelectorAll('.grid-block');
            blockList.forEach(block => block.style.backgroundColor = "rgb(255, 255, 255)"); */
        }

    </script>
</body>
</html>